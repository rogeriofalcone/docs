[mysql] 
# CLIENT # 
port = 3306 
socket = /b001/app/mysql/mysql.sock 
init-command = 'SET NAMES utf8;set collation_connection=utf8_unicode_ci' 
no-auto-rehash

[mysqld] 
# GENERAL # 
user = mysql 
default-storage-engine = InnoDB 
socket = /b001/app/mysql/mysql.sock
pid-file = /b001/app/mysql/mysql.pid
#bind-address = 172.17.88.22 
# MyISAM # 
key-buffer-size = 32M 
myisam_sort_buffer_size = 32M 
myisam_repair_threads = 1 
concurrent_insert = 2 
myisam-recover-options = FORCE,BACKUP

# SAFETY # 
max-allowed-packet = 1G 
max-connect-errors = 1000 
#skip-name-resolve 
sql-mode = STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_AUTO_VALUE_ON_ZERO,NO_ENGINE_SUBSTITUTION,ONLY_FULL_GROUP_BY 
#explicit_defaults_for_timestamp = 1 ##Mark wants to hold this change## 
sysdate-is-now = 1 
innodb-strict-mode = 1

# DATA STORAGE # 
datadir = /b001/app/mysql/

## Charset & collation # 
character-set-server = utf8 
collation-server = utf8_unicode_ci 
init-connect = 'SET NAMES utf8'

# BINARY LOGGING # 
log-bin = /b001/app/mysql/binlogs/mysql-bin 
binlog-format = ROW 
expire-logs-days = 5 
sync-binlog = 1 
binlog_error_action = ABORT_SERVER 
binlog_row_image = minimal 
server-id = 8822 
log_bin_trust_function_creators = 1 
master_verify_checksum = 1

# EVENT SCHEDULER # 
event_scheduler = 1

# TMP Dir # 
tmpdir = /b001/app/mysql/

# CACHES AND LIMITS # 
tmp-table-size = 128M 
max-heap-table-size = 128M 
query-cache-type = 0 
query-cache-size = 0 
max-connections = 400 
thread-cache-size = 64 
open-files-limit = 65535 
table-definition-cache = 4096 
table-open-cache = 4096 
table_open_cache_instances = 8

# Thread Buffers # 
sort_buffer_size = 1M 
read_buffer_size = 2M 
join_buffer_size = 1M 
read_rnd_buffer_size = 4M

# INNODB # 
innodb_data_file_path = ibdata1:500M:autoextend 
innodb-file-format = Barracuda 
innodb-flush-method = O_DIRECT 
innodb-log-files-in-group = 3 
innodb-log-file-size = 256M 
innodb_large_prefix = 1 
innodb-flush-log-at-trx-commit = 2 
innodb-file-per-table = 1 
innodb-buffer-pool-size = 18G 
innodb-buffer-pool-instances = 16 
innodb_log_buffer_size = 16M 
innodb_lock_wait_timeout = 300 
innodb_autoinc_lock_mode = 2 
innodb_read_io_threads = 8 
innodb_write_io_threads = 8 
innodb_sort_buffer_size = 8M 
innodb_open_files = 1024 
innodb_purge_threads = 4 
innodb-status-file = 1 
innodb_buffer_pool_dump_at_shutdown = 1 
innodb_buffer_pool_load_at_startup = 1 
innodb_locks_unsafe_for_binlog = 1

## InnoDB undo for future # 
innodb_undo_directory = /b001/app/mysql/undologs 
innodb_undo_tablespaces = 8

# TIMEOUT # 
interactive_timeout=600 
wait_timeout = 600

# LOGGING # 
log-error = /b001/app/mysql/mysql-error.log 
log-queries-not-using-indexes = 1 
slow-query-log = 1 
slow-query-log-file = /b001/app/mysql/mysql-slow.log

## WSREP OPTIONS## 
## Full path to wsrep provider library or 'none' 
wsrep_provider=/usr/lib64/libgalera_smm.so

wsrep_node_address=172.17.88.22
# Provider specific configuration options 
wsrep_provider_options="gcache.size=4096M; gmcast.segment=4; ist.recv_addr=172.17.88.22; ist.bind_addr=172.17.88.22; evs.keepalive_period=PT3S; evs.inactive_check_period=PT10S; evs.suspect_timeout=PT30S; evs.inactive_timeout=PT1M; evs.install_timeout=PT1M; evs.send_window=1024; evs.user_send_window=512; gcs.fc_limit=64; gcs.fc_factor=0.95; gcs.fc_master_slave="YES""

# Logical cluster name. Should be the same for all nodes. 
wsrep_cluster_name="Arrow_POC_Cluster"

# Group communication system handle 
wsrep_cluster_address="gcomm://172.17.88.22,172.25.88.18,172.19.88.17"

# Human_readable node name (non-unique). Hostname by default. 
wsrep_node_name=172.17.88.22

# Address for incoming client connections. Autodetect by default. 
wsrep_node_incoming_address=172.17.88.22:3306

# How many threads will process writesets from other nodes 
wsrep_slave_threads=8

# Location of the directory with data files. Needed for non-mysqldump 
# state snapshot transfers. Defaults to mysql_real_data_home. 
wsrep_data_home_dir=/b001/app/mysql/

# Maximum number of rows in write set 
wsrep_max_ws_rows=131072

# Maximum size of write set 
wsrep_max_ws_size=1073741824

# to enable debug level logging, set this to 1 
wsrep_debug=1

# convert locking sessions into transactions 
#wsrep_convert_LOCK_to_trx=0

# how many times to retry deadlocked autocommits 
wsrep_retry_autocommit=1

# change auto_increment_increment and auto_increment_offset automatically 
wsrep_auto_increment_control=1

#for batch loads.. retry autoinc insert, which failed for duplicate key error 
wsrep_drupal_282555_workaround=0

# enable "strictly synchronous" semantics for read operations 
wsrep_causal_reads=0

## WSREP State Transfer options 
# State Snapshot Transfer method 
wsrep_sst_method=xtrabackup-v2

# Address on THIS node to receive SST at. DON'T SET IT TO DONOR ADDRESS!!! 
wsrep_sst_receive_address=172.17.88.22

# SST authentication string. This will be used to send SST to joining nodes. 
wsrep_sst_auth="backup:XXXX"

# Desired SST donor name.
# wsrep_sst_donor=